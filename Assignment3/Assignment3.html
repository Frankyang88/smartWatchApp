<!DOCTYPE html>
<html>
<link rel="stylesheet" type="text/css" href="css/COSC345.css">
<meta charset="UTF-8">
<title> COSC345 Assignment 3 </title>
<body>


<section class="content">
    <header>
        <h1>COSC345 PROJECT REPORT</h1>
        <b> maintaned by The Perfect Work Team </b>
    </header>
    <div id="team_members">

        <h2> Team Members </h2>

        <h4> Junyu Zhu : </h4>

        <h4> Alycia Ng 8170944: </h4>

        <h4> Ana Baltazar 7002399: </h4>

        <h4> Jialin Yang 7674607: </h4>

    </div>
    <div>
        <h2><a href="index.html">Travel App</a></h2>
    </div>

    <div id="about_the_app">

        <h1>About the App</h1>
        
        <h2>About the Emulator</h2>
             
     
        <h2>About the Travel App</h2>
     

    </div>

    <div id="Emulator Structure and Function">

        <h1>User input and events</h1>
        <p> The emulator provides a user input service to the app. This is done by passing  a callback function from the app to the emulator at the setup. When a mouse event occurs, the emulator then use the callback function to pass the mouse event as an object back to the app. </p>
        <p>The app will describe what to do for input (a mouse event in the browser. For example, when a user ‘presses’ a button on the screen, swipes to the right, left and right.  The emulator interpret this as a click  and a click and drag event.</p>
        <p>The emulator initializes a mouseEvent object. This object has the following attributes - one that tracks the state of a mouse click event (stored as a 0 or 1), where exactly the user has clicked (stored as x and y coordinates) and also a variable that tracks and saves the state of a click and drag event (stored as canY and canX). It can use these to specify what to display when a user event has occurred without the app knowing that the user event was a click from the browser.</p>
        <h1>Support for third-party-Libraries: Google Map</h1>
        <p>The emulator can support display for a Google Map. This is done by having specific functions that can display. For example, there is a method that appends a ‘div’ container to display a dynamic map. Having a div tag to display a Google Map allows it to be dynamic instead of a static image in the canvas. </p>
        <h1>Formatting text</h1>
        <p>In the description section of each location, if the app wants to display a new paragraph we added in “\n” that tells the emulator to create a new line. In this way, the application will still remain ignorant of <p> tags and <br> tags if it wants to create a new line in the paragraph. We have also created a function that measures length of the text so that it fits within the frame-size of the emulator. In this way, developers who want to install their app on our emulator can display text that fits in the emulator screen. </p>
        <h1>Display related Functions of the Emulator</h1>
        <p>The Smart Watch Emulator provides several Canvas functions for the app. For example, it can draw an image with full screen, text and any rectangle. The purpose of using canvas functions is to allow the app to remain ignorant of the browser and instead focus on what to display as images, buttons and text.</p>
        <p>The app can draw a button in any size of the emulator screen. In the emulator, a data object returns the height and width of the screen. This data object will help the app draw images, buttons and shapes that fit within the size of the screen. The app can also control the color of the button as well.</p>
        <p>To clear the display the app would need to call the emulator.clearScreen() function.</p>
        <p>To draw a rectangle, the app would need to call the draw function of the emulator and pass in the width, height and colour of the rectangle.</p>
        <p>The emulator also provides the width and height settings to the app. Therefore configuring where the x and y coordinate of each button, image, text or shape that the app wants to display in the emulator should be easier. The x and y coordinates are fixed to be relative to the position of the Watch screen on the browser. Also, the emulator provides the width and height of its frame. This also allows the app to focus on the layout of its display without worrying how it should output it on the emulator screen.</p>
        <p>The emulator also provides functions to display circles and lines but it is specific to drawing a clock. </p>
        <h1>Location Services</h1>
        <p>The emulator can calculate the distance between two points. The app must provide two locations.   Each of them contains both longitude and latitude.</p>
        <p>The emulator also provides GPS coordinates to the app on request. Location settings must be set to allow GPS locations.</p>
        <h1>Import function</h1>
        <p>The emulator installs the app just like a real smartwatch by asking the user to input the name of its app js file. Once the user inputs its javascript file, the emulator will “install” the app by appending a script tag to the HTML file.</p>
        <p>For the import function to work, one would need to use https:// if using Google Chrome. For the other browsers, one can use the standard protocol.</p>
        <p>This should emulate a user installing an app through an app library like Google Play or iTunes.</p>
     </div>

    <div id="The Travel Application">
        <p>The Travel Application requires the database.js to be imported first before the travelApp.js is imported in the emulator.</p>
        <p>The Travel Application that we have developed has a database that is specific to Dunedin. The database of the Travel Application also has locations that do not exist in Google Maps. This gives our app something that can differentiate it from its competitors. The Travel App also gets the current geolocation of the user so it is customized to the user’s queries. For example, we have included Otago Daily Times (ODT), Eureka and Korea House which are not present in the Google Maps database .</p>
        <p>The Travel App has six pages. The first page provides the user with a list of choices. The user is limited to picking either Accommodation, Entertainment & Fun or Restaurants & Bars as a choice. Once the user makes a decision, the Travel App ‘turns’ to the next page and asks the user how far he/she will be willing to travel. Once the user has made a choice from 1km, 5km and 20km, the Travel App will access the database.</p>
        <p>The Travel App filters the results returned by the database to fit what the user has requested. For example, when a user asks the Travel App to return locations at a specified radius, the app will use the Google API to calculate the distance between two points. The Travel App will return the locations that fall in range of the chosen radius. </p>
        <p>We also implemented a ‘voucher’ option where the user is offered a voucher when they are close to a particular location.  The user ‘swipes right’ to view the voucher. The amount of discount the voucher offers is randomly set. This should allow the user to review an offer. To view a description of a particular location, the user can ‘swipe down’. To view the location in Google Maps, the user can ‘press’. </p>
    </div>

    <div id="Known issues">

        <p> The Travel App has to wait for the Google Maps API to respond and return the current geographical location of the user. This causes lagging when loading the click handler on the page showing the radius options for the first. </p>

    </div>

    <div id="API">

        <p>Frame size:
            The watch frame size is 200*200, the inner frame is 160*160. Every component displayed on the screen must be within the inner frame.</p>
        <p>User Input:
            In the emulator, there is only one interaction between app and emulator. That is mouseevent. Every time the user triggers a click event, the app will receive a mouse event object from emulator. (mouseevent.x, mouseevent.y) are the relative position of mouse on the screen, if the left top of the screen is supposed to be (0,0). mouseevent.swipeleft is true if the input is a mouse drag from right to left. The other swipe actions are defined in the same way.  By calling mouseeventtrigger in app, the app could pass the real mouse event handler to the emulator. Then the app could work as it receive mouse events from emulator.
        </p>
        <p>1. calculateDistance(p1,p2);
            p1 and p2 are objects, {longitude ,latitude}. The type of inner parameters is float. It returns the distance between p1 and p2 in  kilometers.</p>
        <p>2. wait(function,time)
            If time is 1000, that means the function would be executed after 1000 ms. This method helps to  delay some specific operations.  This could be helpful in canvas as drawing images requires time to load images. The time on loading images may corrupt the layout of some pages.</p>
        <p>3. coordinatesofEmulator
            Return the absolute position of watch frame. it is the left top point.
        </p>
        <p>4.lefttop
            Return the absolute position of the watch screen. It is the left top point.
        </p>
        <p>5. framesize
            Return the size of screen</p>
        <p>6. help
            Return a description of emulator</p>
        <p>7.draw(x,y,width,height,color) [int,int,int,int,string]
            Draw a box on canvas, starting from (x,y) on the screen with width and height. The last parameter defines the color filled in the box.
        </p>
        <p>8. write(x,y,message,maxwidth) [int,int,string,int]
            Write message at (x,y). The maxwidth limits the maximum length of string displayed on the screen in case of the text cross the screen border.</p>
        <p>9. measureTextlen(message) [string]
            Measure the message length display on the screen, return value is the number of pixels. This should help the app format text correctly in the emulator screen.</p>
        <p>10. clearScreen()
            Clear the inner frame, used before update a new page</p>
        <p>11. drawbackImage(image) [string]
            Draw background image, input is the name of image including its path. Type of input parameter is string.
        </p>
        <p>12.drawcircle(x,y,radius,color) [int,int,int,string]
            Draw a circle on canvas with position(x,y), radius and color.</p>
        <p>13. create(node,class_id,id) [string,string,string]
            Create a new node with node_name, class name and id.
        </p>
        <p>14. creatediv(class_id,id)
            Create a new div with class name and id;</p>
        <p>15. setItem
            Save data on the browser using local storage.</p>
        <p>16. getItem
            Get data off the browser using local storage.
        </p>
        <P>17. getLocation
            Gets the longitude and latitude off Google Maps API and saves the longitude and latitude on local storage. One would need to turn on location settings in Google Chrome. Works well in Firefox.
        </P>
        <p>18. mouseeventtrigger(func)[function]
            Takes in a callback function and stores it as a variable to use.
            Returns a mouse event to the app.</p>
        <p>19. wait(funct, time)[funct, time]
            Will make the emulator wait. This is a thin wrapper for the setTimeout browser function.</p>

    </div>

    <div id="Programming Experience & Tools ">
        <p>Our emulator relied heavily on the Canvas element to display the App’s information. Therefore we needed a way to debug the Canvas element. The first tool we tried using was from Google Chrome’s Dev Tools. We spent a long time trying to make this debugger tool work. In the end, we realized too late that we have wasted a lot of time on this tool when we read on stackexchange that this has been uninstalled.
        </p>
        <p>Instead we used Firefox’s debugger tool to debug the canvas element to help development. This debugger tool should have allowed us to step through each Canvas draw call method.  However, we found this debugger tool to be difficult to use because we did not fully understand how to use it. Also, this debugger seemed to step through code that was not drawing a Canvas element. For example, it was stepping through the jquery script that was included in the HTML file. Therefore we felt like it would be a waste of time trying to debug the debugger.  </p>
        <p>At this point, we gave up on using a Canvas object debugger tool completely. Instead we fixed any Canvas bugs on the spot. For example, we preloaded all the images on the start because we found loading images in every page to be too slow. This method is not part of the original design of the Travel Application because it shows the user every, single image at the start.
        </p>
        <p>The application cannot know about Browser functions and the Emulator cannot know about Application functions. This caused us a lot of trouble and time in figuring out how to build an emulator that allows the application to remain ignorant of the browser. The prototype that we developed in the first semester had an interface that did not have a clear boundary between the app and emulator. For example, the application knew that it had to use a button tag to display on the emulator. Also, our emulator was too specific for our application. For example, it knew the name of our Travel App without the application telling it. </p>
        <p>The Google map page is implemented by google’s API. We found that we cannot draw Google Map on Canvas. Instead we decided to show Google Maps using a div tag.</p>
        <p>We also tried implementing two solutions to register a click event. One of the solutions that we have tried is polling. We have tried setting a timer in the emulator and once called by the app, will start periodically checking if a mouse event has occurred. The application called this function continuously using a while loop at setup. </p>

        </div>
    <div id="Team Work and Group Issues">
        <p>We have a lot of difficulty coordinating meeting times that suit everyone. Each team member has a busy schedule and we can usually meet together as four at night.</p>
        <p>We also have a facebook chat where each group member can discuss any aspect of the project. Also, to ask any questions to any of the group members. The group chat was also useful to coordinate meeting times.</p>
        <p>We also used an online project management tool called Trello. This was mainly used to keep everyone up to date with tasks that need to be completed. Also, it allows members to work on the project on their own time because they know what to do without calling a meeting.</p>
        <h1>Week 1 on Trello</h1>
            <a><img src="images/"></a>
        <h1>Week 4 on Trello</h1>
        <h1>Week 6 on Trello</h1>
    </div>
</section>
</body>
</html>
